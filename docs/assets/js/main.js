"use strict";const searchField=document.querySelector(".search-field"),button=document.querySelector(".btn"),showsList=document.querySelector(".shows__list");let arrFav=getFavorite();function searchShow(){let e=searchField.value;fetch(`http://api.tvmaze.com/search/shows?q=${e}`).then(e=>e.json()).then(e=>{const t=e;let s="";for(let e=0;e<t.length;e++){const o=t[e].show.id,i=t[e].show.name;let a=t[e].show.image,c="";if(arrFav.includes(o.toString())&&(c="favorite-show"),null===a){s+=`<li class="show-item ${c}" id="${o}"> <img class="show-image" src="https://via.placeholder.com/210x295/cccccc/666666/?text=TV" alt="${i}"><h2 class="show-title">${i}</h2></li>`,showsList.innerHTML=s}else{s+=`<li class="show-item ${c}" id="${o}"> <img class="show-image" src="${t[e].show.image.medium}" alt="${i}"><h2 class="show-title">${i}</h2></li>`,showsList.innerHTML=s}}markFavorite()})}function handleClick(e){const t=e.currentTarget;t.classList.toggle("favorite-show"),!0===t.classList.contains("favorite-show")?arrFav.push(t.getAttribute("id")):remove(arrFav,t.getAttribute("id")),saveFavorite(arrFav)}function remove(e,t){const s=e.indexOf(t);-1!==s&&e.splice(s,1)}function markFavorite(){const e=document.querySelectorAll(".show-item");for(let t=0;t<e.length;t++)e[t].addEventListener("click",handleClick)}function saveFavorite(e){localStorage.setItem("favShows",JSON.stringify(e))}function getFavorite(){const e=JSON.parse(localStorage.getItem("favShows"));return null===e?[]:e}button.addEventListener("click",searchShow);